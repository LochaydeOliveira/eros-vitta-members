# ğŸš€ Prompt para Cursor AI (VSCode)

Quero que vocÃª desenvolva uma aplicaÃ§Ã£o em **PHP puro**, com **MySQL**, hospedada na **HostGator**, e que utilize **URL amigÃ¡veis**. O domÃ­nio Ã©: `erosvitta.com.br`.  

## ğŸ¯ Objetivo da aplicaÃ§Ã£o
Criar uma **mini Ã¡rea de membros** onde os clientes da Hotmart possam acessar os conteÃºdos digitais adquiridos (Ebooks, Audiobooks, VÃ­deos).  
O foco Ã© que o cliente veja o material em versÃ£o online (HTML, Ã¡udio, vÃ­deo), e sÃ³ receba o **PDF final apÃ³s 7 dias de garantia**.  

---

## ğŸ“‚ Estrutura de Pastas

```
/eros-vitta
â”‚â”€â”€ public/                # Pasta pÃºblica (apontar domÃ­nio aqui)
â”‚   â”‚â”€â”€ index.php           # Roteador principal
â”‚   â”‚â”€â”€ .htaccess           # Regras de URL amigÃ¡vel
â”‚   â”‚â”€â”€ assets/             # CSS, JS, imagens
â”‚
â”‚â”€â”€ app/
â”‚   â”‚â”€â”€ config.php          # ConfiguraÃ§Ãµes gerais (DB, etc.)
â”‚   â”‚â”€â”€ routes.php          # DefiniÃ§Ã£o de rotas amigÃ¡veis
â”‚   â”‚â”€â”€ db.php              # ConexÃ£o com MySQL
â”‚   â”‚â”€â”€ auth.php            # Login, logout, sessÃ£o
â”‚   â”‚â”€â”€ hotmartWebhook.php  # Endpoint para receber dados da Hotmart
â”‚   â”‚â”€â”€ mailer.php          # FunÃ§Ãµes de envio de e-mail (PHPMailer)
â”‚
â”‚â”€â”€ views/
â”‚   â”‚â”€â”€ header.php
â”‚   â”‚â”€â”€ sidebar.php
â”‚   â”‚â”€â”€ footer.php
â”‚   â”‚â”€â”€ dashboard.php       # Tela principal
â”‚   â”‚â”€â”€ ebook.php           # ExibiÃ§Ã£o de ebook
â”‚   â”‚â”€â”€ video.php           # ExibiÃ§Ã£o de vÃ­deo
â”‚   â”‚â”€â”€ audio.php           # ExibiÃ§Ã£o de Ã¡udio
â”‚   â”‚â”€â”€ email_template.html # Template de email em HTML
â”‚
â”‚â”€â”€ storage/
â”‚   â”‚â”€â”€ ebooks/
â”‚   â”‚â”€â”€ videos/
â”‚   â”‚â”€â”€ audios/
```

---

## âš™ï¸ ConfiguraÃ§Ã£o de `.htaccess`

Na pasta `public/`:

```apache
RewriteEngine On

# Redireciona tudo para index.php, exceto arquivos existentes
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?url=$1 [QSA,L]
```

---

## ğŸ—„ï¸ Banco de Dados MySQL

```sql
CREATE TABLE users (
  id INT AUTO_INCREMENT PRIMARY KEY,
  email VARCHAR(150) UNIQUE NOT NULL,
  senha VARCHAR(255) NOT NULL,
  nome VARCHAR(150),
  criado_em TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE materials (
  id INT AUTO_INCREMENT PRIMARY KEY,
  titulo VARCHAR(150) NOT NULL,
  tipo ENUM('ebook','video','audio') NOT NULL,
  caminho VARCHAR(255) NOT NULL
);

CREATE TABLE user_materials (
  id INT AUTO_INCREMENT PRIMARY KEY,
  user_id INT NOT NULL,
  material_id INT NOT NULL,
  liberado_em TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  FOREIGN KEY (user_id) REFERENCES users(id),
  FOREIGN KEY (material_id) REFERENCES materials(id)
);
```

---

## ğŸ”‘ Requisitos Funcionais

1. **Login e AutenticaÃ§Ã£o**
   - O usuÃ¡rio acessa via email + senha cadastrados no webhook da Hotmart.
   - Senhas devem ser armazenadas com `password_hash()`.

2. **Webhook da Hotmart**
   - Endpoint em `/app/hotmartWebhook.php`.
   - Recebe evento de compra aprovada.
   - Cria usuÃ¡rio no banco com email, senha gerada automaticamente, e vincula os materiais comprados.
   - **Envia email automÃ¡tico para o cliente** (via PHPMailer), contendo:
     - Mensagem de boas-vindas
     - Link de acesso Ã  Ã¡rea de membros
     - UsuÃ¡rio (email) e senha gerada
   - O envio deve ser feito a partir do e-mail profissional: **contato@erosvitta.com.br**.

3. **Dashboard**
   - Layout dividido em **header, sidebar, main e footer**.
   - **Header**: logo + nome do usuÃ¡rio + botÃ£o sair.
   - **Sidebar**: lista dinÃ¢mica de materiais liberados (ebooks, vÃ­deos, Ã¡udios).
   - **Main**: Ã¡rea onde o material selecionado Ã© exibido.
   - **Footer**: copyright.

4. **Controle de Entrega**
   - Antes dos 7 dias â†’ exibir ebooks apenas em HTML.
   - ApÃ³s 7 dias â†’ liberar botÃ£o de download do PDF.

5. **SeguranÃ§a**
   - Pasta `/storage/` nÃ£o deve ser pÃºblica.
   - Materiais devem ser servidos via PHP (`readfile()`), somente para usuÃ¡rios logados.
   - SessÃµes seguras com `session_start()` e expiraÃ§Ã£o de sessÃ£o.

---

## ğŸ“§ Template de E-mail em HTML (views/email_template.html)

```html
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bem-vindo Ã  Ã¡rea de membros</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f9f9f9;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 600px;
      margin: 30px auto;
      background: #ffffff;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    .header {
      background: #1a1a1a;
      padding: 20px;
      text-align: center;
    }
    .header img {
      max-width: 150px;
    }
    .content {
      padding: 30px;
      color: #333333;
      line-height: 1.6;
    }
    .content h1 {
      font-size: 22px;
      color: #1a1a1a;
    }
    .credentials {
      background: #f3f3f3;
      padding: 15px;
      margin: 20px 0;
      border-radius: 8px;
    }
    .btn {
      display: inline-block;
      margin-top: 20px;
      padding: 12px 20px;
      background: #007BFF;
      color: #ffffff !important;
      text-decoration: none;
      font-weight: bold;
      border-radius: 8px;
    }
    .footer {
      background: #f3f3f3;
      padding: 15px;
      text-align: center;
      font-size: 12px;
      color: #666666;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <img src="https://erosvitta.com.br/assets/logo.png" alt="Logo ErosVitta">
    </div>
    <div class="content">
      <h1>OlÃ¡, {{NOME_CLIENTE}}!</h1>
      <p>Obrigado pela sua compra na Hotmart. Agora vocÃª jÃ¡ tem acesso Ã  sua <strong>Ãrea de Membros Exclusiva</strong>.</p>
      <p>Use as credenciais abaixo para acessar:</p>
      <div class="credentials">
        <p><strong>UsuÃ¡rio (E-mail):</strong> {{EMAIL_CLIENTE}}</p>
        <p><strong>Senha:</strong> {{SENHA_GERADA}}</p>
      </div>
      <p>Clique no botÃ£o abaixo para entrar:</p>
      <a href="https://erosvitta.com.br/login" class="btn">Acessar Ãrea de Membros</a>
      <p>âš ï¸ Importante: apÃ³s 7 dias de garantia, o conteÃºdo em PDF serÃ¡ liberado para download.</p>
    </div>
    <div class="footer">
      <p>&copy; 2025 ErosVitta - Todos os direitos reservados</p>
    </div>
  </div>
</body>
</html>
```

Esse template deve ser carregado pelo `hotmartWebhook.php`, substituindo as variÃ¡veis `{{NOME_CLIENTE}}`, `{{EMAIL_CLIENTE}}`, `{{SENHA_GERADA}}` antes do envio.

---

## ğŸ”Œ Ferramentas/Bibliotecas Sugeridas
- **PHPMailer** â†’ envio de emails transacionais com template HTML.
- **AltoRouter** (opcional) â†’ roteamento de URLs amigÃ¡veis.
- **Medoo** (opcional) â†’ simplificaÃ§Ã£o de queries no MySQL.
- Mas a aplicaÃ§Ã£o deve rodar mesmo em **PHP puro**, sem dependÃªncias externas obrigatÃ³rias.

---

ğŸ‘‰ Gere todo o **cÃ³digo inicial completo** da aplicaÃ§Ã£o com base nessa especificaÃ§Ã£o, incluindo:

- Estrutura de pastas
- Arquivos principais
- ConexÃ£o ao MySQL
- Roteamento bÃ¡sico
- Login e autenticaÃ§Ã£o
- Webhook da Hotmart com envio de email automÃ¡tico baseado no template HTML
- Dashboard inicial com header, sidebar, main e footer
